<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0"><link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/green/pace-theme-minimal.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"alphax.top","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.17.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"bookmark":{"enable":false,"color":"#37c6c0","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":"waline","storage":true,"lazyload":false,"nav":null,"activeClass":"waline"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script><meta name="description" content="从下午三点弄到晚上的12点，总算把Next的版本更新到了最新。总体的感受是，总算不用理会那么多bug了，hexo g也更加快了，Next内部集成的功能也更多了。"><meta property="og:type" content="article"><meta property="og:title" content="Next5.1.4更新至8.2记"><meta property="og:url" content="https://alphax.top/4a339ed/index.html"><meta property="og:site_name" content="AlphaUnkX."><meta property="og:description" content="从下午三点弄到晚上的12点，总算把Next的版本更新到了最新。总体的感受是，总算不用理会那么多bug了，hexo g也更加快了，Next内部集成的功能也更多了。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/qq22915519023113713520230625190139.webp"><meta property="og:image" content="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/qq23013617022915519020230625190210.webp"><meta property="og:image" content="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/qq23013617022915519020230625223640.webp"><meta property="og:image" content="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/image-20230709211650951.png"><meta property="og:image" content="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/image-20230709214426350.png"><meta property="og:image" content="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/image-20230709220006750.png"><meta property="og:image" content="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/image-20230709220757909.png"><meta property="og:image" content="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/image-20230709220907224.png"><meta property="og:image" content="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/image-20230709221409297.png"><meta property="og:image" content="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/qq23013617022915519020230625225005.webp"><meta property="og:image" content="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/qq22915519023113713520230723170247.webp"><meta property="og:image" content="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/qq22915519023113713520230723170240.webp"><meta property="og:image" content="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/qq22915519023113713520230723170232.webp"><meta property="og:image" content="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/qq22915519023113713520230723170223.webp"><meta property="og:image" content="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/b.webp"><meta property="og:image" content="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/a.webp"><meta property="article:published_time" content="2023-06-25T10:08:24.000Z"><meta property="article:modified_time" content="2024-05-22T15:49:16.126Z"><meta property="article:author" content="AlphaUnkX"><meta property="article:tag" content="建站"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/qq22915519023113713520230625190139.webp"><link rel="canonical" href="https://alphax.top/4a339ed/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://alphax.top/4a339ed/","path":"4a339ed/","title":"Next5.1.4更新至8.2记"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Next5.1.4更新至8.2记 | AlphaUnkX.</title><link rel="dns-prefetch" href="waline.alphax.top"><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><link rel="alternate" href="/atom.xml" title="AlphaUnkX." type="application/atom+xml"><style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">AlphaUnkX.</p><i class="logo-line"></i></a></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="搜索" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-guestbook"><a href="/guestbook/" rel="section"><i class="fa fa-comment fa-fw"></i>留言板</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E5%9B%A0"><span class="nav-text">原因</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%87%E7%A8%8B"><span class="nav-text">过程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E6%96%B0%E7%89%88%E6%9C%AC"><span class="nav-text">下载新版本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9B%B4%E6%94%B9%E7%9B%B8%E5%85%B3config%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-text">更改相关config配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%99%A4%E4%BA%86%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%85%B6%E4%BB%96%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E2%80%A6"><span class="nav-text">除了配置文件其他一些问题…</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#SideBar%E7%A4%BE%E4%BA%A4%E9%93%BE%E6%8E%A5%E7%9A%84%E5%9B%BE%E6%A0%87%E9%97%AE%E9%A2%98"><span class="nav-text">SideBar社交链接的图标问题</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%87%8D%E5%90%AFValine%E8%AF%84%E8%AE%BA"><span class="nav-text">重启Valine评论</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%AD%A3%E5%B8%B8%E6%93%8D%E4%BD%9C"><span class="nav-text">正常操作</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9B%B4%E6%8D%A2%E6%88%90Waline%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F"><span class="nav-text">更换成Waline评论系统</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE"><span class="nav-text">解决无法访问</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E9%82%AE%E7%AE%B1%E6%8F%90%E9%86%92"><span class="nav-text">邮箱提醒</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E4%B8%80%E4%BA%9B%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="nav-text">其他一些自定义变量</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3"><span class="nav-text">官方文档</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E7%9A%84%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F"><span class="nav-text">其他的评论系统</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%BD%91%E7%AB%99%E8%83%8C%E6%99%AF%E5%92%8C%E5%B7%A6%E4%B8%8A%E8%A7%92%E5%8D%A1%E7%89%87%E8%83%8C%E6%99%AF%E4%BF%AE%E6%94%B9"><span class="nav-text">网站背景和左上角卡片背景修改</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A2%9E%E5%8A%A0%E6%9A%97-%E4%BA%AE%E5%88%87%E6%8D%A2%E6%A8%A1%E5%BC%8F%E6%8C%89%E9%92%AE"><span class="nav-text">增加暗&#x2F;亮切换模式按钮</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Sitemap%E7%AB%99%E7%82%B9%E5%9C%B0%E5%9B%BE%E6%B7%BB%E5%8A%A0"><span class="nav-text">Sitemap站点地图添加</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99%EF%BC%9A"><span class="nav-text">参考资料：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%81%97%E7%95%99"><span class="nav-text">遗留</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">AlphaUnkX</p><div class="site-description" itemprop="description"></div></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/GeekBookx" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;GeekBookx" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="https://weibo.com/u/5997832003" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;5997832003" rel="noopener me" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a> </span><span class="links-of-author-item"><a href="https://x.com/ATHEXScorez1" title="Twitter → https:&#x2F;&#x2F;x.com&#x2F;ATHEXScorez1" rel="noopener me" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a> </span><span class="links-of-author-item"><a href="https://www.youtube.com/channel/UCXvPanS6EaMCtI6ZburcmLw" title="YouTube → https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCXvPanS6EaMCtI6ZburcmLw" rel="noopener me" target="_blank"><i class="fab fa-youtube fa-fw"></i>YouTube</a> </span><span class="links-of-author-item"><a href="https://bgm.tv/user/721785" title="Bangumi → https:&#x2F;&#x2F;bgm.tv&#x2F;user&#x2F;721785" rel="noopener me" target="_blank"><i class="fab fa-bangumi fa-fw"></i>Bangumi</a> </span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/windows-32" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;windows-32" rel="noopener me" target="_blank"><i class="fab fa-zhihu1 fa-fw"></i>知乎</a> </span><span class="links-of-author-item"><a href="https://space.bilibili.com/110924426" title="Bilibili → https:&#x2F;&#x2F;space.bilibili.com&#x2F;110924426" rel="noopener me" target="_blank"><i class="fab fa-bilibili fa-fw"></i>Bilibili</a> </span><span class="links-of-author-item"><a href="https://account.xbox.com/en-US/Profile?gamerTag=AlphaUnkX" title="Xbox → https:&#x2F;&#x2F;account.xbox.com&#x2F;en-US&#x2F;Profile?gamerTag&#x3D;AlphaUnkX" rel="noopener me" target="_blank"><i class="fab fa-xbox fa-fw"></i>Xbox</a> </span><span class="links-of-author-item"><a href="http://steamcommunity.com/id/AlphaUnkX" title="Steam → http:&#x2F;&#x2F;steamcommunity.com&#x2F;id&#x2F;AlphaUnkX" rel="noopener me" target="_blank"><i class="fab fa-steam fa-fw"></i>Steam</a> </span><span class="links-of-author-item"><a href="https://music.163.com/#/user/home?id=3351145306" title="网易云 → https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;3351145306" rel="noopener me" target="_blank"><i class="fab fa-wyy fa-fw"></i>网易云</a> </span><span class="links-of-author-item"><a href="https://open.spotify.com/user/314w37qisyw7vf62xra6udzbo42u" title="Spotify → https:&#x2F;&#x2F;open.spotify.com&#x2F;user&#x2F;314w37qisyw7vf62xra6udzbo42u" rel="noopener me" target="_blank"><i class="fab fa-spotify fa-fw"></i>Spotify</a> </span><span class="links-of-author-item"><a href="https://www.acfun.cn/u/72243486" title="ACFUN → https:&#x2F;&#x2F;www.acfun.cn&#x2F;u&#x2F;72243486" rel="noopener me" target="_blank"><i class="fab fa-acfun fa-fw"></i>ACFUN</a></span></div></div></div></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://alphax.top/4a339ed/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="AlphaUnkX"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="AlphaUnkX."><meta itemprop="description" content=""></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Next5.1.4更新至8.2记 | AlphaUnkX."><meta itemprop="description" content=""></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Next5.1.4更新至8.2记</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2023-06-25 18:08:24" itemprop="dateCreated datePublished" datetime="2023-06-25T18:08:24+08:00">2023-06-25</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2024-05-22 23:49:16" itemprop="dateModified" datetime="2024-05-22T23:49:16+08:00">2024-05-22</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-tags"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/tags/%E5%BB%BA%E7%AB%99/" itemprop="url" rel="index"><span itemprop="name">建站</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Waline：</span> <a title="waline" href="/4a339ed/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/4a339ed/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><p>从下午三点弄到晚上的12点，总算把Next的版本更新到了最新。总体的感受是，总算不用理会那么多bug了，hexo g也更加快了，Next内部集成的功能也更多了。</p><span id="more"></span><h3 id="原因">原因</h3><p>一开始建站的时候使用的还是他人的旧教程，所以安装的Next版本也是旧的。在使用过程中发现有很多的bug，但迫于没有时间和精力的无奈只能是忍着用下去。最近找了个空闲的时间，提起干劲总算一口气把next版本一口气提了上来。</p><h3 id="过程">过程</h3><h4 id="下载新版本">下载新版本</h4><p>1.把新的主题直接git clone到hexo的主题文件夹内</p><p>2.把旧版本的Next文件夹改成其他名字，比如next-old。把新版本的文件夹名字改为next。</p><h4 id="更改相关config配置文件">更改相关config配置文件</h4><p>3.打开根目录下的_config.yml，把language从zh-Hans改为zh-CN，把theme改成新主题的名字。</p><p>4.原来修改配置文件是到theme文件夹下的对应主题文件夹下修改config文件，但为了更新主题，不建议这样做，因为更新时会把原来的配置文件覆盖。Hexo提供了一种办法，在根目录（注意是根目录）下找到_config.xxxx.yml，这个是Hexo提供的方案，hexo不从主题文件夹内读取配置而是从这里读取。</p><p><img data-src="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/qq22915519023113713520230625190139.webp" alt=""></p><p><img data-src="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/qq23013617022915519020230625190210.webp" alt=""></p><p>找到这个文件，把xxx改成自己主题文件夹下的名字，比如我的新版本名字改成了next，那这个文件名字应该为_config.next.yml（下文以此为例）</p><p>4.打开主题文件夹内的_config.yml，把所有内容复制到 _config.next.yml内，然后打开对内容逐个修改。</p><h4 id="除了配置文件其他一些问题…">除了配置文件其他一些问题…</h4><h5 id="SideBar社交链接的图标问题">SideBar社交链接的图标问题</h5><p>5.有些图标在Font Awesome内没有，需要我们自己下载添加。</p><p>SVG图标可以在这里下载:<a target="_blank" rel="noopener" href="https://www.iconfont.cn/">https://www.iconfont.cn/</a></p><p>在source文件夹下打开images文件夹（没有的自己建一个），把自己下载的图标SVG文件放进去。</p><p>在根目录的source文件夹下打开_data文件夹（没有的自己建一个），然后新建一个styles.styl文件。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.fa-bangumi &#123;</span><br><span class="line">  background-image: url(<span class="string">&#x27;/images/bangumi.svg&#x27;</span>);</span><br><span class="line">  background-size: <span class="number">1</span>em <span class="number">1</span>em;</span><br><span class="line">  opacity: <span class="number">0.55</span>;</span><br><span class="line">  background-position: <span class="number">0.05</span>rem <span class="number">0.2</span>rem;</span><br><span class="line">  background-repeat: no-repeat;</span><br><span class="line">  height: <span class="number">1</span>rem;</span><br><span class="line">  width: <span class="number">1</span>rem; </span><br><span class="line">  border-radius: <span class="number">0</span>rem;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>标红的一串路径是图标的位置，我们要把这个路径中图标的名字改成和images文件夹中图标的名字一样。</p><p>比如我往images文件夹内放入了b.svg，那么上面那串红色路径，就应该是’/images/b.svg’。修改好后保存文件。</p><p>打开主题的配置文件，找到自己要加图标的那行链接。</p><p>上文的fa-bangumi就是在图标引用时候的名称，可以自定义。引用时和引用Font Awesome图标一样。</p><p>格式按照fab+图标名即可</p><p>哦对了，所有图标都是这样，要在前面加一个fab，引用Font Awesome图标也是。</p><p>要引入多个图标，复制上方代码再另起一行粘贴到代码底下，改一下fa-bangumi和路径名字即可。</p><p>最后到主题的配置文件的custom_file_path这行，找到style一行，把style前面的注释去掉即可。</p><p>如果发现图标显示不正常，先检查下载的SVG图标文件是否正常，再排查Font Awesome图标库内已有这个图标，引用了双重图标重叠导致的问题的可能性。</p><h5 id="重启Valine评论">重启Valine评论</h5><h6 id="正常操作">正常操作</h6><p>在新版本，已经移除了Valine评论系统。但Next官方提供的评论系统感觉都不太好用，要不就是国内的畅言太多无关紧要的东西，要不就是国外的评论网站访问是个大问题，要不就是以github为基础的评论系统管理评论太不方便。我决定还是引用回valine。</p><p>打开根目录下，打开git bash here，输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install next-theme/hexo-next-valine</span><br></pre></td></tr></table></figure><p>这时候valine会下载到node_modules\hexo-next-valine这个路径下，打开这个路径找到default.yaml，把配置文件复制加到主题配置文件的底下。</p><p>调好valine的app key和app id，然后找到主题配置文件的comments:一栏。</p><p>下面的active:一栏设置为valine，再一下面一点的lazyload:调成false，最后保存。</p><p><img data-src="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/qq23013617022915519020230625223640.webp" alt=""></p><p>打开网页后发现valine评论已经被启用，但是却用不了，提示Code 401: 未经授权的操作,请检查你的AppId和AppKey</p><p>解决办法是到自己的leancloud设置-应用凭证内找到rest api复制服务器地址，然后粘贴到刚刚valine在主题配置文件的serverURLs:一栏，即可解决。</p><h5 id="更换成Waline评论系统">更换成Waline评论系统</h5><p>因为valine已经好久不更新了，而且有着一些比较高危的系统漏洞存在。在综合考虑下，我还是决定更换成更强大的waline评论系统。</p><p>检查一下自己的leancloud账户是否是国际区，如果是国内版本，请使用原来的账户重新注册一个国际版本的。（由于国内版比较麻烦）之后利用leancloud的导入导出数据功能，将数据转移至国际版本，最后把国内版的应用删除掉。</p><p><img data-src="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/image-20230709211650951.png" alt="image-20230709211650951"></p><p>(旁边就是删除应用的选项)</p><p>如果先前没有使用过leancloud，请先创建账户，再创建一个应用。</p><p>由于waline是一个需要后端支持的评论系统，需要创建一个后端。常见的方法是部署在vercel，raliway等云服务平台。</p><p>waline官方这里给出了详细的部署到各个平台的办法。<a target="_blank" rel="noopener" href="https://waline.js.org/guide/deploy/">https://waline.js.org/guide/deploy/</a></p><p>在官方没有提到的其他平台上部署，也可以参照教程上部署的方法来进行，可以举一反三，参照着部署。</p><p>这里我首推vercel部署，以下部署以vercel进行。</p><p>按照官方给出的vercel教程部署即可。<a target="_blank" rel="noopener" href="https://waline.js.org/guide/deploy/vercel.html">https://waline.js.org/guide/deploy/vercel.html</a></p><p>在添加环境变量一页，key一列是变量名称，value是变量的值。</p><p><img data-src="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/image-20230709214426350.png" alt="image-20230709214426350"></p><p>添加一个变量后，点击add another在下方添加一行变量行，再填写变量。以此类推，最后填写完所有的变量后。点击save，一次性将所有的变量值添加进这个项目。</p><p>在官方的这里给出的教程之上，添加完关于leancloud的三项变量后，我们最好再添加多两项环境变量。</p><p>SITE_NAME和SITE_URL</p><p>前者是网站的名字，后者是网站的网址。请自行根据自己情况进行添加。</p><p><strong>要在这里补充的是，在每一次删减添加更改环境变量后都需要到Deployments一页找到最上面的一次部署（即距今最后的一次部署）点击右侧的点然后点击Reploy进行重新部署。</strong></p><p>在重新部署成功后，回到创建的项目的首页。找到domains一项，这里是waline评论系统的后端的url。</p><p>接着在本地hexo目录下安装和配置waline系统和上面添加valine的步骤基本一致。在hexo根目录打开git bash</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @waline/hexo-next</span><br></pre></td></tr></table></figure><p>在根目录下的node_modules文件夹内找到waline打开default.yaml，把里面所有的配置文件复制，加到主题配置文件的底下。</p><p>enable一项改为true，serverURL一项填写你刚刚在vercel项目首页看到的waline评论系统的url。</p><p>其他选项一般不用改动，可以自己研究研究。</p><p>把主题配置文件的active 一项改为 waline，并确保其他评论系统的enable一项为false</p><p>在hexo根目录打开git bash输入hexo s，在随意一个评论区下点击注册，第一个注册的人将成为这个网站评论系统的管理员，所以我们要开hexo s而不是d来确保自己是第一个注册账户的人。</p><p>最后hexo cl hexo g hexo d上传github部署。</p><p>这样，我们的waline评论系统就搭建好了。</p><h6 id="解决无法访问">解决无法访问</h6><p>国内的vercel.app域名已经被污染无法打开，除非打开梯子否则评论系统无法访问。</p><p>解决方案都是通过添加自己的域名到vercel来绕过。</p><p>如果是eu.org这类申请的免费域名，在申请的时候填写DNS服务时，写上<code>ns1.vercel-dns.com``ns2.vercel-dns.com</code>这两个DNS地址。Check for correctness of这里选择第一个就好，默认选择的第三个无法通过验证。</p><p><img data-src="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/image-20230709220006750.png" alt="image-20230709220006750"></p><p>在获得域名后，在vercel添加自己的新域名，然后删除原来vercel自动分配的长域名，最后到Deployment一页，选择最上面的一次部署点击重新部署。这样，新的部署就会默认以你自己添加的域名来运行。</p><p>然而eu.org的审批我已经等了一个多星期了，一点音讯都没有，我决定还是自己买一个域名。</p><p>首先购买一个域名（废话），来到vercel项目的设置一页的域名选项。</p><p><img data-src="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/image-20230709220757909.png" alt="image-20230709220757909"></p><p>添加自己的域名，点击add。之后会出现一个选框，我们选第一个，直接add即可。<img data-src="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/image-20230709220907224.png" alt="image-20230709220907224"></p><p>这个是问你是否添加www+域名和域名这两项。</p><p>打开自己购买域名的dns选项</p><p>按照vercel的提示来添加dns选项</p><p><img data-src="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/image-20230709221409297.png" alt="image-20230709221409297"></p><p>添加dns选项，网站可用后，再到deployment一项重新部署</p><p>再到本地hexo目录下找到主题配置文件，把waline的serverURL这一项的网站改为自己的域名（我就是忘了这步）</p><p>最后hexo d重新上传即可使用。</p><h6 id="邮箱提醒">邮箱提醒</h6><p>为了添加邮箱提醒，要多在vercel中添加几项环境变量。</p><p>一定要填写的：</p><table><thead><tr><th>SMTP_USER</th><th>这项是用户名，填写自己的邮箱地址</th></tr></thead><tbody><tr><td>SMTP_SECURE</td><td>看自己选择的发送邮箱平台是否支持SSL，是的话选择ture,否则false</td></tr><tr><td>SENDER_NAME</td><td>发件人，填写自己的名字即可</td></tr><tr><td>SENDER_EMAIL</td><td>填写自己的发件邮箱</td></tr><tr><td>SMTP_PASS</td><td>一般为自己邮箱密码（部分如163、qq这类邮箱有另设的密码，上网查查如何开启即可）</td></tr></tbody></table><p>分选择填写的：</p><table><thead><tr><th>SMTP_SERVICE</th><th>邮箱平台，我这里选择QQ。</th></tr></thead></table><p>点<a target="_blank" rel="noopener" href="https://github.com/nodemailer/nodemailer/blob/master/lib/well-known/services.json">这里</a> 查看支持的邮箱平台和端口、地址。</p><p><strong>选择填写了SMTP_SERVICE的话，就不需要再填写SMTP_HOST和SMTP_PORT这两项，两者任选其一</strong></p><p>填写好后，到deployment页面重新部署使环境变量生效。邮箱提醒功能就成功生效了。</p><p>如果和更换域名一起进行，一定要先完成更换域名这一步再进行这一步，否则邮箱提醒不生效。</p><p>还可以更换自己的邮箱通知样式，不过找不到储存邮箱样式的文件，暂时不改了。</p><h6 id="其他一些自定义变量">其他一些自定义变量</h6><p>评论系统的自定义很大程度上可以通过删减添加环境变量来实现，比如隐藏评论者的浏览器UA，IP属地等等</p><p><a target="_blank" rel="noopener" href="https://waline.js.org/reference/server/env.html">https://waline.js.org/reference/server/env.html</a></p><p>在这里查看所有的环境变量</p><h6 id="官方文档">官方文档</h6><p><a target="_blank" rel="noopener" href="https://waline.js.org/guide/">https://waline.js.org/guide/</a></p><p>这里有waline的一些自定义教程，官方文档很重要。</p><h6 id="其他的评论系统">其他的评论系统</h6><p>Artalk貌似不错 <a target="_blank" rel="noopener" href="https://artalk.js.org/">https://artalk.js.org/</a></p><h5 id="网站背景和左上角卡片背景修改">网站背景和左上角卡片背景修改</h5><p>依旧是在style.styl文件内，另起一行，加入以下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">body &#123;</span><br><span class="line">  background-image: url();</span><br><span class="line">    background-repeat: no-repeat;</span><br><span class="line">    background-attachment:fixed; //不重复</span><br><span class="line">    background-size: cover     //填充</span><br><span class="line">    background-position:50% 50%;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>一般来说直接复制粘贴默认就行。</p><p>而如果要调整页面的透明度，再按照老方法来是不行了。新的做法是</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//###### 博客内容透明化 ######</span><br><span class="line"></span><br><span class="line">:root &#123;</span><br><span class="line">  --content-bg-color:#ffffffe6;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>#ffffffe6应该是透明色的代码，可以根据自己想要的透明度的大小来选择。</p><p>这样就OK了</p><p>参考的文章<a target="_blank" rel="noopener" href="https://hui-shao.cn/next-transparent-background/">https://hui-shao.cn/next-transparent-background/</a></p><p>而如果要调左上角这个卡片，方法应该大同小异，更新后我已经懒得改了，自行探索吧。</p><p><img data-src="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/qq23013617022915519020230625225005.webp" alt=""></p><h5 id="增加暗-亮切换模式按钮">增加暗/亮切换模式按钮</h5><p>新版本新增了深色模式模式，但是发现深色模式下在当前背景下的字体的可见度降低很多。如果要新增这个按钮，应该需要较为突出博文文字的背景，深色模式才算可用。否则深色模式下字体亮度降低，文字变得不可视。因此这个计划暂时搁浅。增加的方法应该在网上可以搜得到。</p><p>2024.5.22更新</p><p>大晚上打开网站被亮瞎眼总是难受，但是其实又懒得改，直接下了个插件临时顶顶先</p><p><a target="_blank" rel="noopener" href="https://github.com/rqh656418510/hexo-next-darkmode/blob/main/README_CN.md">hexo-next-darkmod</a></p><p>配置直接点击超链接进去看即可。</p><p>这种通过js文件硬改网站肯定还是有一些遗留bug的（比如waline评论部分），不过问题不大的情况下先凑合着用用也没问题。</p><h5 id="Sitemap站点地图添加">Sitemap站点地图添加</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-baidu-sitemap --save</span><br></pre></td></tr></table></figure><p>第一个是通用的，第二个是百度的，百度搞特殊。自己按需选择安装。</p><p>然后打开根目录下的config.yml，更改config.yml，把URL改成自己的域名。这个URL要全称。</p><p>生成的站点文件在根目录下的public文件夹内。</p><p>想更改域名其实还有另外一种办法，就是直接更改插件的Default模板文件。具体看这篇文章。</p><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/31411755">修改hexo sitemap 生成插件中的链接模板</a></p><p>最后再在各个搜索引擎的站长工具里提交自己的站点地图。</p><h3 id="参考资料：">参考资料：</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41603102/article/details/117203360">Hexo+Next8的升级踩坑之旅_小牛呼噜噜的博客-CSDN博客</a></p><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Bennnnnnn/article/details/128000842">Hexo-Next主题搭建个人博客最新配置教程！_hexo next主题配置_Bennnnnnn的博客-CSDN博客</a></p><p><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_11767891/5557620">Hexo + NexT 通过自定义样式添加 Bilibili 图标_11757891的技术博客_51CTO博客</a></p><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/424932976?utm_id=0">Next主题设置-安装Valine和Artitalk - 知乎</a></p><p><a target="_blank" rel="noopener" href="https://www.google.com/search?q=Code+401%3A+%E6%9C%AA%E7%BB%8F%E6%8E%88%E6%9D%83%E7%9A%84%E6%93%8D%E4%BD%9C%2C%E8%AF%B7%E6%A3%80%E6%9F%A5%E4%BD%A0%E7%9A%84AppId%E5%92%8CAppKey.&amp;newwindow=1&amp;source=hp&amp;ei=wamVZNvXKczk2roP2_aU8As&amp;iflsig=AOEireoAAAAAZJW30ZmwgiOgpwZQuEB_FTI3Pu9de0WY&amp;ved=0ahUKEwibvJ7sytn_AhVMslYBHVs7Bb4Q4dUDCAk&amp;uact=5&amp;oq=Code+401%3A+%E6%9C%AA%E7%BB%8F%E6%8E%88%E6%9D%83%E7%9A%84%E6%93%8D%E4%BD%9C%2C%E8%AF%B7%E6%A3%80%E6%9F%A5%E4%BD%A0%E7%9A%84AppId%E5%92%8CAppKey.&amp;gs_lcp=Cgdnd3Mtd2l6EANQAFgAYJYDaABwAHgAgAHaAogB2gKSAQMzLTGYAQCgAQKgAQE&amp;sclient=gws-wiz">Code 401: 未经授权的操作,请检查你的AppId和AppKey. - Google 搜索</a></p><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_34361289/article/details/122424678">(18条消息) Hexo 设置博客背景图片 （NexT 主题 ）_hexo 为文章添加背景_qq_34361289的博客-CSDN博客</a></p><p><a target="_blank" rel="noopener" href="https://hui-shao.cn/next-transparent-background/">Hexo + NexT8主题配置透明背景过程踩坑小记 | Hui-Shao’s Blog</a></p><p><a target="_blank" rel="noopener" href="https://waline.js.org/guide/">https://waline.js.org/guide/</a></p><h3 id="遗留">遗留</h3><p>Next新版本的主题配置文件有一些选项功能我没有变动，总共以下：</p><p><img data-src="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/qq22915519023113713520230723170247.webp" alt=""></p><p><img data-src="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/qq22915519023113713520230723170240.webp" alt=""></p><p><img data-src="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/qq22915519023113713520230723170232.webp" alt=""></p><p><img data-src="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/qq22915519023113713520230723170223.webp" alt=""></p><p><img data-src="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/b.webp" alt=""></p><p><img data-src="https://alpha-1253902598.cos.ap-guangzhou.myqcloud.com/a.webp" alt=""></p></div><footer class="post-footer"><div class="post-tags"><a href="/tags/%E5%BB%BA%E7%AB%99/" rel="tag"><i class="fa fa-tag"></i> 建站</a></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2022 – <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="fa fa-heartsafas"></i> </span><span class="author" itemprop="copyrightHolder">AlphaUnkX</span></div></div></footer><div class="back-to-top" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/js/third-party/search/local-search.js"></script><script src="/js/third-party/fancybox.js"></script><script src="/js/third-party/pace.js"></script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-CN","enable":true,"serverURL":"waline.alphax.top","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"el":"#waline","comment":true,"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","path":"/4a339ed/"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><script>document.addEventListener("page:loaded",()=>{NexT.utils.loadComments(CONFIG.waline.el).then(()=>NexT.utils.getScript(CONFIG.waline.libUrl,{condition:window.Waline})).then(()=>Waline.init(Object.assign({},CONFIG.waline,{el:document.querySelector(CONFIG.waline.el)})))})</script><script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script><script>var options={bottom:"64px",right:"unset",left:"32px",time:"0.5s",mixColor:"transparent",backgroundColor:"transparent",buttonColorDark:"#100f2c",buttonColorLight:"#fff",saveInCookies:!0,label:"🌓",autoMatchOsTheme:!0};const darkmode=new Darkmode(options);(window.darkmode=darkmode).showWidget()</script></body></html>